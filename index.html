<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>UIET MD University Rohtak Results</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet"href="https://icons8.com/icons/set/menu-bar">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
</head>
<body>
  <!--<a href="addResult.html">admin</a>-->
  <div class="box1">
    <div class="box1_head"><i class="fas fa-lock"></i>UIET MD University Results</div>
    <div id="info">
      <span>Instructions</span>
      <p>1. All fields with * (astrisk) are neccessary for searching or finding a result.</p>
      <p>2.Results that are displayed here for further correction/updation and final result will be printed on DMC.</p>
      <p>3.Candidates required to enter examination roll numbers only not class roll numbers that alloted during exam time.</p>
    </div>
    <form class="main">
      <div class="main-box">
        <label for="declare">Result Declared for <span>*</span></label>
        <select name="declare" id="declare" class="declare">
          <option value="">declaration for</option>
          <option value="ME">Mechanical Engineering Sem-1,4,6 Reappear/Regular 2025</option>
          <option value="BioTech">Bio-Technology Sem-2,3,8 Reappear/Regular 2025</option>
          <option value="CSE">Computer Science Engineering CSE sem-1,3,5 Regular/Reappear 2025</option>
        </select>
      </div>
      <div class="main-box">
        <label for="Registration no.">Registration Number <span>*</span></label>
        <input type="number" placeholder="Enter Registration Number">
      </div>
      <div class="main-box">
        <label for="Roll no.">Roll Number <span>*</span></label>
        <input type="number" placeholder="Enter Roll Number">
      </div>
      <div class="main-box">
       <label for="dob">DOB <span>*</span></label>
       <div class="dob"> 
        <select name="date" id="date" class="date">
          <option value="">--Date--</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
          <option value="24">24</option>
          <option value="25">25</option>
          <option value="26">26</option>
          <option value="27">27</option>
          <option value="28">28</option>
          <option value="29">29</option>
          <option value="30">30</option>
          <option value="31">31</option>
        </select>
        <select name="mon" id="month" class="month">
          <option value="">--Month--</option>
          <option value="j">January</option>
          <option value="f">February</option>
          <option value="m">March</option>
          <option value="a">April</option>
          <option value="ma">May</option>
          <option value="ju">June</option>
          <option value="jul">July</option>
          <option value="au">August</option>
          <option value="s">September</option>
          <option value="o">October</option>
          <option value="n">November</option>
          <option value="d">December</option>
        </select>
        <select name="year" id="year" class="year">
          <option value="">--Year--</option>
          <option value="1">1989</option>
          <option value="2">1990</option>
          <option value="3">1991</option>
          <option value="4">1992</option>
          <option value="5">1993</option>
          <option value="6">1994</option>
          <option value="7">1995</option>
          <option value="8">1996</option>
          <option value="9">1997</option>
          <option value="10">1997</option>
          <option value="11">1998</option>
          <option value="12">1999</option>
          <option value="13">2001</option>
          <option value="14">2002</option>
          <option value="15">2003</option>
          <option value="16">2004</option>
          <option value="17">2005</option>
          <option value="18">2006</option>
          <option value="19">2007</option>
          <option value="20">2008</option>
          <option value="21">2009</option>
          <option value="22">2010</option>
          <option value="23">2011</option>
          <option value="24">2012</option>
        </select>
       </div>
      </div>
      <div class="main-box">
        <label for="pin">Security Pin <span>*</span></label>
        <div class="captcha">
          <input type="text" placeholder="Enter Security Pin">
          <div class="code-ref">
            <div class="pin-code">A53FG0</div>
            <div class="refresh-pin"><i class="fas fa-sync-alt"></i></div>
          </div>
        </div>
      </div>
      <div class="main-box">
        <button>View Result</button>
      </div>
    </form>
  </div>
  <script>
  // Generate CAPTCHA
  function generateCaptcha() {
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    let captcha = "";
    for (let i = 0; i < 6; i++) {
      captcha += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    document.querySelector('.pin-code').textContent = captcha;
  }

  generateCaptcha();
  document.querySelector('.refresh-pin').addEventListener('click', generateCaptcha);

  // Show error message below field
  function showError(el, message) {
    removeError(el);
    el.style.border = "2px solid red";
    const error = document.createElement("div");
    error.className = "error-message";
    error.style.color = "red";
    error.style.fontSize = "13px";
    error.style.marginTop = "3px";
    error.textContent = message;
    el.parentNode.appendChild(error);
  }

  // Remove error and apply green border
  function removeError(el) {
    el.style.border = "2px solid green";
    const err = el.parentNode.querySelector(".error-message");
    if (err) err.remove();
  }

  // Validate individual field
  function validateField(el) {
    const val = el.value.trim();
    const placeholder = el.getAttribute("placeholder");
    const id = el.id;

    // For SELECT fields
    if (el.tagName === "SELECT") {
      if (!val) {
        const label = id.charAt(0).toUpperCase() + id.slice(1);
        showError(el, `Please select ${label}.`);
      } else {
        removeError(el);
      }
    }

    // Registration Number
    if (placeholder === "Enter Registration Number") {
      if (!/^\d{10}$/.test(val)) {
        showError(el, "Registration number must be 10 digits.");
      } else {
        removeError(el);
      }
    }

    // Roll Number
    if (placeholder === "Enter Roll Number") {
      if (!/^\d{7}$/.test(val)) {
        showError(el, "Roll number must be 7 digits.");
      } else {
        removeError(el);
      }
    }

    // Security Pin (CAPTCHA)
    if (placeholder === "Enter Security Pin") {
      const captchaCode = document.querySelector(".pin-code").textContent;
      if (val.toUpperCase() !== captchaCode) {
        showError(el, "Incorrect security pin.");
      } else {
        removeError(el);
      }
    }
  }

  // Attach real-time validation listeners
  function attachValidationListeners() {
    const reg = document.querySelector('input[placeholder="Enter Registration Number"]');
    const roll = document.querySelector('input[placeholder="Enter Roll Number"]');
    const captchaInput = document.querySelector('input[placeholder="Enter Security Pin"]');
    const selects = document.querySelectorAll('select');

    [reg, roll, captchaInput].forEach(el => {
      el.addEventListener("blur", () => {
        validateField(el);
        checkFormValidity();
      });
      el.addEventListener("input", () => {
        validateField(el);
        checkFormValidity();
      });
    });

    selects.forEach(el => {
      el.addEventListener("change", () => {
        validateField(el);
        checkFormValidity();
      });
      el.addEventListener("blur", () => {
        validateField(el);
        checkFormValidity();
      });
    });
  }

  // Enable/Disable button based on form validity
  function checkFormValidity() {
    const fields = [
      document.querySelector("#declare"),
      document.querySelector('input[placeholder="Enter Registration Number"]'),
      document.querySelector('input[placeholder="Enter Roll Number"]'),
      document.querySelector("#date"),
      document.querySelector("#month"),
      document.querySelector("#year"),
      document.querySelector('input[placeholder="Enter Security Pin"]')
    ];
    const submitBtn = document.querySelector('button');
    let isValid = true;

    for (let field of fields) {
      const val = field.value.trim();
      const hasError = field.parentNode.querySelector(".error-message");
      if (!val || hasError) {
        isValid = false;
        break;
      }
    }

    submitBtn.disabled = !isValid;
  }

  // Form submit validation and auto-scroll
  document.querySelector("form").addEventListener("submit", function (e) {
    e.preventDefault();

    const fields = [
      document.querySelector("#declare"),
      document.querySelector('input[placeholder="Enter Registration Number"]'),
      document.querySelector('input[placeholder="Enter Roll Number"]'),
      document.querySelector("#date"),
      document.querySelector("#month"),
      document.querySelector("#year"),
      document.querySelector('input[placeholder="Enter Security Pin"]')
    ];

    let valid = true;
    let firstInvalid = null;

    fields.forEach(field => {
      validateField(field);
      if (field.parentNode.querySelector(".error-message")) {
        if (!firstInvalid) firstInvalid = field;
        valid = false;
      }
    });

    if (!valid && firstInvalid) {
      firstInvalid.scrollIntoView({ behavior: "smooth", block: "center" });
      firstInvalid.focus();
    }

    if (valid) {
  // Build your result page URL
  const roll = document.querySelector('input[placeholder="Enter Roll Number"]').value.trim();
  const reg = document.querySelector('input[placeholder="Enter Registration Number"]').value.trim();
  
  // Example redirect to a dynamic ASPX page with query parameters
  window.location.href = `addResult.html?roll=${roll}&reg=${reg}`;
}
  });

  // Run once to attach everything
  attachValidationListeners();
  checkFormValidity();
</script>
</body>
</html>
