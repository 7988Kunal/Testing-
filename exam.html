<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Python Programming CBT Exam</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f5f5f5;
    }
    .header {
      background: #003366;
      color: white;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .container {
      display: flex;
      padding: 10px;
    }
    .left-panel {
      width: 70%;
      padding: 10px;
      background: white;
      border-radius: 10px;
    }
    .right-panel {
      width: 30%;
      padding: 10px;
    }
    .question-box {
      margin-bottom: 20px;
    }
    .question-number {
      font-weight: bold;
    }
    .options {
      margin-top: 10px;
    }
    .options label {
      display: block;
      margin-bottom: 5px;
    }
    .buttons button {
      margin: 5px;
    }
    .status-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 10px;
    }
    .status-btn {
      width: 30px;
      height: 30px;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }
    .not-visited { background: #d3d3d3; }
    .not-answered { background: #f0ad4e; }
    .answered { background: #5cb85c; }
    .review { background: #800080; }
    .ans-review { background: #1e90ff; }
    .legend span {
      display: inline-block;
      width: 15px;
      height: 15px;
      margin-right: 5px;
    }
    .timer {
      font-size: 18px;
      font-weight: bold;
    }
    .student-info {
      font-size: 14px;
      line-height: 1.4;
    }
    .submit-btn:disabled {
      background-color: grey;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: not-allowed;
      opacity: 0.7;
    }
  </style>
</head>
<body>

  <!-- Header with Student Info -->
  <div class="header">
    <div class="student-info">
      <strong>Candidate:</strong> <span id="studentName">Loading...</span><br>
      <strong>Roll No:</strong> <span id="rollNumber">Loading...</span><br>
      <strong>Reg No:</strong> <span id="regNumber">Loading...</span>
    </div>
    <div class="timer" id="timer">30:00</div>
  </div>

  <!-- Main Exam Layout -->
  <div class="container">
    <div class="left-panel">
      <div class="question-box" id="question-box">
        <div class="question-number" id="q-number"></div>
        <div class="question-text" id="q-text"></div>
        <div class="options" id="q-options"></div>
      </div>
      <div class="buttons">
        <button onclick="saveAndNext()">Save & Next</button>
        <button onclick="markForReview()">Mark for Review</button>
        <button onclick="clearResponse()">Clear Response</button>
        <button class="submit-btn" disabled>Final Submit (Auto)</button>
      </div>
    </div>
    <div class="right-panel">
      <h4>Question Status</h4>
      <div class="status-grid" id="status-grid"></div>
      <div class="legend">
        <p><span class="not-visited"></span> Not Visited</p>
        <p><span class="not-answered"></span> Not Answered</p>
        <p><span class="answered"></span> Answered</p>
        <p><span class="review"></span> Marked for Review</p>
        <p><span class="ans-review"></span> Answered & Review</p>
      </div>
    </div>
  </div>
  <!-- Script Section -->
  <!--<script>
    
    const questions = [
      {
        question: "Which of the following is used to define a block of code in Python?",
        options: ["Curly braces", "Parentheses", "Indentation", "Quotation marks"],
        answer: 2
      },
      {
        question: "What is the output of: print(2 ** 3 ** 2)?",
        options: ["64", "512", "256", "None"],
        answer: 1
      },
      {
        question: "Which of these is a mutable built-in type in Python?",
        options: ["str", "list", "tuple", "int"],
        answer: 1
      },
      {
        question: "Which of these methods can be used with dictionaries?",
        options: ["append()", "add()", "update()", "extend()"],
        answer: 2
      },
      {
        question: "What is the result of list(range(0, 10, 2))?",
        options: ["[2, 4, 6, 8, 10]", "[0, 2, 4, 6, 8]", "[1, 3, 5, 7, 9]", "[0, 2, 4, 6, 8, 10]"],
        answer: 1
      },
      {
        question: "Which module in Python supports regular expressions?",
        options: ["pyregex", "regexlib", "re", "regexp"],
        answer: 2
      },
      {
        question: "What is the correct syntax to open a file named 'data.txt' for reading?",
        options: ["open('data.txt', 'r')", "open('data.txt', 'read')", "file('data.txt')", "open.read('data.txt')"],
        answer: 0
      },
      {
        question: "Which keyword is used to create a generator in Python?",
        options: ["iter", "yield", "return", "gen"],
        answer: 1
      },
      {
        question: "Which of these is not a valid set operation?",
        options: ["union()", "intersect()", "difference()", "symmetric_difference()"],
        answer: 1
      },
      {
        question: "What is the output of print(type(lambda x: x))?",
        options: ["<class 'function'>", "<class 'lambda'>", "<class 'object'>", "<lambda 'function'>"],
        answer: 0
      },
      {
        question: "Which of these is a correct decorator syntax?",
        options: ["@decorator", "#decorator", "$decorator", "decorator@"],
        answer: 0
      },
      {
        question: "What does the 'pass' keyword do in Python?",
        options: ["Stops execution", "Skips to next line", "Does nothing", "Throws exception"],
        answer: 2
      },
      {
        question: "Which of these exceptions is raised when dividing by zero?",
        options: ["ZeroError", "ZeroDivisionError", "ArithmeticError", "MathError"],
        answer: 1
      },
      {
        question: "Which of these can be used as keys in a dictionary?",
        options: ["lists", "sets", "tuples", "dictionaries"],
        answer: 2
      },
      {
        question: "Which operator is used for floor division in Python?",
        options: ["/", "%", "//", "div"],
        answer: 2
      },
      {
        question: "Which built-in function returns the length of a list?",
        options: ["length()", "size()", "len()", "count()"],
        answer: 2
      },
      {
        question: "Which function converts a string to an integer in Python?",
        options: ["parseInt()", "int()", "float()", "str()"],
        answer: 1
      },
      {
        question: "Which method is used to add an item at the end of a list?",
        options: ["insert()", "add()", "append()", "extend()"],
        answer: 2
      },
      {
        question: "Which of the following data types is immutable?",
        options: ["list", "set", "dict", "str"],
        answer: 3
      },
      {
        question: "Which function is used to get user input in Python 3?",
        options: ["get()", "input()", "read()", "scan()"],
        answer: 1
      }
    ];

    let current = 0;
    let responses = Array(questions.length).fill(null);
    let status = Array(questions.length).fill("not-visited");
    let timer = 1 * 15;

    function loadStudentDetails() {
      const name = sessionStorage.getItem("username");
      const roll = sessionStorage.getItem("rollNo");
      const reg = sessionStorage.getItem("regNo");

      if (!name || !roll || !reg) {
        alert("Unauthorized access. Please login first.");
        window.location.href = "index.html";
        return;
      }

      document.getElementById("studentName").textContent = name;
      document.getElementById("rollNumber").textContent = roll;
      document.getElementById("regNumber").textContent = reg;
    }

    function loadQuestion(index) {
      const q = questions[index];
      document.getElementById("q-number").textContent = `Q${index + 1}`;
      document.getElementById("q-text").textContent = q.question;
      const opts = q.options.map((opt, i) => `
        <label>
          <input type="radio" name="option" value="${i}" ${responses[index] == i ? 'checked' : ''}> ${opt}
        </label>
      `).join("");
      document.getElementById("q-options").innerHTML = opts;

      if (status[index] === "not-visited") status[index] = "not-answered";
      renderStatus();
    }

    function renderStatus() {
      document.getElementById("status-grid").innerHTML = status.map((s, i) => `
        <button class="status-btn ${s}" onclick="goto(${i})">${i + 1}</button>
      `).join("");
    }

    function saveAndNext() {
      const selected = document.querySelector('input[name="option"]:checked');
      if (selected) {
        responses[current] = parseInt(selected.value);
        status[current] = status[current] === "review" ? "ans-review" : "answered";
      } else {
        status[current] = "not-answered";
      }
      if (current < questions.length - 1) current++;
      loadQuestion(current);
    }

    function markForReview() {
      const selected = document.querySelector('input[name="option"]:checked');
      if (selected) {
        responses[current] = parseInt(selected.value);
        status[current] = "ans-review";
      } else {
        status[current] = "review";
      }
      if (current < questions.length - 1) current++;
      loadQuestion(current);
    }

    function clearResponse() {
      responses[current] = null;
      status[current] = "not-answered";
      loadQuestion(current);
    }

    function goto(index) {
      current = index;
      loadQuestion(index);
    }

    function startTimer() {
      const timerElement = document.getElementById("timer");
      const interval = setInterval(() => {
        if (timer <= 0) {
          clearInterval(interval);
          alert("⏰ Time's up! Submitting your exam...");
          finalSubmit();
        }
        const min = Math.floor(timer / 60);
        const sec = timer % 60;
        timerElement.textContent = `${String(min).padStart(2, '0')}:${String(sec).padStart(2, '0')}`;
        timer--;
      }, 1000);
    }

    function finalSubmit() {
      const total = questions.length;
      const answered = responses.filter(r => r !== null).length;
      const notAnswered = status.filter(s => s === "not-answered").length;
      const review = status.filter(s => s === "review").length;
      const ansReview = status.filter(s => s === "ans-review").length;

      const summary = `
📝 Exam Submitted Successfully!

📊 Summary:
✔️ Total Questions: ${total}
✅ Answered: ${answered}
❌ Not Answered: ${notAnswered}
🔄 Marked for Review: ${review}
🔵 Answered & Review: ${ansReview}
      `;

      alert(summary);
      sessionStorage.clear(); // clean session
      window.location.href = "thankyou.html"; // redirect after submission
    }

    window.onload = () => {
      loadStudentDetails();
      loadQuestion(current);
      startTimer();
      window.onbeforeunload = null;
    };
  </script>-->
<script>
  const questions = [
    {
      question: "Which of the following is used to define a block of code in Python?",
      options: ["Curly braces", "Parentheses", "Indentation", "Quotation marks"],
      answer: 2
    },
    {
      question: "What is the output of: print(2 ** 3 ** 2)?",
      options: ["64", "512", "256", "None"],
      answer: 1
    },
    {
      question: "Which of these is a mutable built-in type in Python?",
      options: ["str", "list", "tuple", "int"],
      answer: 1
    },
    {
      question: "Which of these methods can be used with dictionaries?",
      options: ["append()", "add()", "update()", "extend()"],
      answer: 2
    },
    {
      question: "What is the result of list(range(0, 10, 2))?",
      options: ["[2, 4, 6, 8, 10]", "[0, 2, 4, 6, 8]", "[1, 3, 5, 7, 9]", "[0, 2, 4, 6, 8, 10]"],
      answer: 1
    },
    {
      question: "Which module in Python supports regular expressions?",
      options: ["pyregex", "regexlib", "re", "regexp"],
      answer: 2
    },
    {
      question: "What is the correct syntax to open a file named 'data.txt' for reading?",
      options: ["open('data.txt', 'r')", "open('data.txt', 'read')", "file('data.txt')", "open.read('data.txt')"],
      answer: 0
    },
    {
      question: "Which keyword is used to create a generator in Python?",
      options: ["iter", "yield", "return", "gen"],
      answer: 1
    },
    {
      question: "Which of these is not a valid set operation?",
      options: ["union()", "intersect()", "difference()", "symmetric_difference()"],
      answer: 1
    },
    {
      question: "What is the output of print(type(lambda x: x))?",
      options: ["<class 'function'>", "<class 'lambda'>", "<class 'object'>", "<lambda 'function'>"],
      answer: 0
    },
    {
      question: "Which of these is a correct decorator syntax?",
      options: ["@decorator", "#decorator", "$decorator", "decorator@"],
      answer: 0
    },
    {
      question: "What does the 'pass' keyword do in Python?",
      options: ["Stops execution", "Skips to next line", "Does nothing", "Throws exception"],
      answer: 2
    },
    {
      question: "Which of these exceptions is raised when dividing by zero?",
      options: ["ZeroError", "ZeroDivisionError", "ArithmeticError", "MathError"],
      answer: 1
    },
    {
      question: "Which of these can be used as keys in a dictionary?",
      options: ["lists", "sets", "tuples", "dictionaries"],
      answer: 2
    },
    {
      question: "Which operator is used for floor division in Python?",
      options: ["/", "%", "//", "div"],
      answer: 2
    },
    {
      question: "Which built-in function returns the length of a list?",
      options: ["length()", "size()", "len()", "count()"],
      answer: 2
    },
    {
      question: "Which function converts a string to an integer in Python?",
      options: ["parseInt()", "int()", "float()", "str()"],
      answer: 1
    },
    {
      question: "Which method is used to add an item at the end of a list?",
      options: ["insert()", "add()", "append()", "extend()"],
      answer: 2
    },
    {
      question: "Which of the following data types is immutable?",
      options: ["list", "set", "dict", "str"],
      answer: 3
    },
    {
      question: "Which function is used to get user input in Python 3?",
      options: ["get()", "input()", "read()", "scan()"],
      answer: 1
    }
  ];

  let current = 0;
  let responses = Array(questions.length).fill(null);
  let status = Array(questions.length).fill("not-visited");

  const TOTAL_TIME_SECONDS = 20 * 60; // 15 minutes

  function loadStudentDetails() {
    const name = sessionStorage.getItem("username");
    const roll = sessionStorage.getItem("rollNo");
    const reg = sessionStorage.getItem("regNo");

    if (!name || !roll || !reg) {
      alert("Unauthorized access. Please login first.");
      window.location.href = "index.html";
      return;
    }

    document.getElementById("studentName").textContent = name;
    document.getElementById("rollNumber").textContent = roll;
    document.getElementById("regNumber").textContent = reg;
  }

  function loadQuestion(index) {
    const q = questions[index];
    document.getElementById("q-number").textContent = `Q${index + 1}`;
    document.getElementById("q-text").textContent = q.question;
    const opts = q.options.map((opt, i) => `
      <label>
        <input type="radio" name="option" value="${i}" ${responses[index] == i ? 'checked' : ''}> ${opt}
      </label>
    `).join("");
    document.getElementById("q-options").innerHTML = opts;

    if (status[index] === "not-visited") status[index] = "not-answered";
    renderStatus();
  }

  function renderStatus() {
    document.getElementById("status-grid").innerHTML = status.map((s, i) => `
      <button class="status-btn ${s}" onclick="goto(${i})">${i + 1}</button>
    `).join("");
  }

  function saveAndNext() {
    const selected = document.querySelector('input[name="option"]:checked');
    if (selected) {
      responses[current] = parseInt(selected.value);
      status[current] = status[current] === "review" ? "ans-review" : "answered";
    } else {
      status[current] = "not-answered";
    }
    if (current < questions.length - 1) current++;
    loadQuestion(current);
  }

  function markForReview() {
    const selected = document.querySelector('input[name="option"]:checked');
    if (selected) {
      responses[current] = parseInt(selected.value);
      status[current] = "ans-review";
    } else {
      status[current] = "review";
    }
    if (current < questions.length - 1) current++;
    loadQuestion(current);
  }

  function clearResponse() {
    responses[current] = null;
    status[current] = "not-answered";
    loadQuestion(current);
  }

  function goto(index) {
    current = index;
    loadQuestion(index);
  }

  function startTimer() {
    const timerElement = document.getElementById("timer");
    let startTime = sessionStorage.getItem("examStartTime");

    if (!startTime) {
      startTime = Date.now();
      sessionStorage.setItem("examStartTime", startTime);
    } else {
      startTime = parseInt(startTime);
    }

    const interval = setInterval(() => {
      const now = Date.now();
      const elapsed = Math.floor((now - startTime) / 1000);
      const remaining = TOTAL_TIME_SECONDS - elapsed;

      if (remaining <= 0) {
        clearInterval(interval);
        alert("⏰ Time's up! Submitting your exam...");
        finalSubmit();
      }

      const min = Math.floor(remaining / 60);
      const sec = remaining % 60;
      timerElement.textContent = `${String(min).padStart(2, '0')}:${String(sec).padStart(2, '0')}`;
    }, 1000);
  }

  function finalSubmit() {
    const total = questions.length;
    const answered = responses.filter(r => r !== null).length;
    const notAnswered = status.filter(s => s === "not-answered").length;
    const review = status.filter(s => s === "review").length;
    const ansReview = status.filter(s => s === "ans-review").length;

    const summary = `
📝 Exam Submitted Successfully!

📊 Summary:
✔️ Total Questions: ${total}
✅ Answered: ${answered}
❌ Not Answered: ${notAnswered}
🔄 Marked for Review: ${review}
🔵 Answered & Review: ${ansReview}
    `;
    alert(summary);
    sessionStorage.clear();
    window.location.href = "thankyou.html";
  }

  // MAIN EXECUTION ON PAGE LOAD
  window.onload = () => {
    loadStudentDetails();
    loadQuestion(current);
    startTimer();
    window.onbeforeunload = () => "Exam in progress. Are you sure you want to leave?";
  };

  // ⛔ Disable F5, Ctrl+R
  document.addEventListener("keydown", function (e) {
    if ((e.key === "F5") || (e.ctrlKey && e.key === "r")) {
      e.preventDefault();
      alert("🔒 Refresh is disabled during the exam!");
    }
  });

  // ⛔ Disable Right Click
  document.addEventListener("contextmenu", e => e.preventDefault());

  // ⛔ Prevent Back Navigation
  history.pushState(null, null, location.href);
  window.onpopstate = function () {
    history.go(1);
  };
</script>
</body>
</html>